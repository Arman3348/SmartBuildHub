{% extends 'adminbase.html' %}
{% load static %}
{% block admin %}
<style>
    :root {
        --primary-blue: #3b82f6;
        --success-green: #22c55e;
        --accent-orange: #f97316;
        --purple-accent: #a855f7;
        --danger-red: #ef4444;
        --dark-bg: #141a2a;
        --dark-text: #e5e7eb;
    }

    .dashboard-header {
        text-align: center;
        margin-bottom: 40px;
        color: #87CEEB;
    }

    .stat-card {
        background: linear-gradient(145deg, #141a2a, #0f1320);
        border: none;
        border-radius: 15px;
        color: white;
        padding: 1.5rem;
        transition: transform 0.3s, box-shadow 0.3s;
        height: 100%;
    }

    .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0, 180, 255, 0.3);
    }

    .stat-icon {
        width: 50px;
        height: 50px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
    }

    .dark-card {
        background: linear-gradient(145deg, #141a2a, #0f1320);
        border: none;
        color: white;
    }

    .progress-custom {
        height: 8px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 4px;
        overflow: hidden;
    }

    .progress-bar-custom {
        height: 100%;
        border-radius: 4px;
        transition: width 1s ease-in-out;
    }

    .activity-dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        margin-top: 6px;
        flex-shrink: 0;
    }

    .quick-action-btn {
        background: linear-gradient(145deg, #141a2a, #0f1320);
        border: none;
        border-radius: 12px;
        padding: 1.5rem;
        color: white;
        text-align: center;
        transition: transform 0.3s, box-shadow 0.3s;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 120px;
    }

    .quick-action-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 180, 255, 0.2);
        color: white;
    }

    .text-primary {
        color: var(--primary-blue) !important;
    }

    .text-success {
        color: var(--success-green) !important;
    }

    .text-info {
        color: var(--purple-accent) !important;
    }

    .bg-primary {
        background-color: var(--primary-blue) !important;
    }

    .bg-success {
        background-color: var(--success-green) !important;
    }

    .bg-danger {
        background-color: var(--danger-red) !important;
    }

    .text-muted {
        color: #9ca3af !important;
    }

    h2,
    h5 {
        color: white !important;
    }

    .fw-bold {
        font-weight: 700 !important;
    }

    .fw-semibold {
        font-weight: 600 !important;
    }

    /* SweetAlert custom colors */
    .swal2-popup.swal2-toast {
        background: #fff !important;
        color: #000 !important;
    }
    .swal2-title {
        color: #000 !important;
    }
</style>

<main class="flex-fill">
    <!-- Dashboard Header -->
    <div class="dashboard-header mb-4">
        <h1 class="fw-bold text-light">Admin Dashboard</h1>
        <p class="mb-0">Welcome to Smart Build Hub Admin Panel</p>
    </div>

    <!-- Stats Cards -->
    <div class="row g-4 mb-4">
        <div class="col-md-6 col-lg-3">
            <div class="stat-card">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <p class="text-muted mb-1">Total Homeowners</p>
                        <h2 class="fw-bold mb-0">{{th}}</h2>
                    </div>
                    <div class="stat-icon" style="background-color: rgba(59, 130, 246, 0.1);">
                        <i class="ti ti-building text-primary fs-4"></i>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-lg-3">
            <div class="stat-card">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <p class="text-muted mb-1">Total Contractors</p>
                        <h2 class="fw-bold mb-0">{{tc}}</h2>
                    </div>
                    <div class="stat-icon" style="background-color: rgba(34, 197, 94, 0.1);">
                        <i class="ti ti-building text-success fs-4"></i>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-lg-3">
            <div class="stat-card">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <p class="text-muted mb-1">Total Projects</p>
                        <h2 class="fw-bold mb-0">{{tp}}</h2>
                    </div>
                    <div class="stat-icon" style="background-color: rgba(168, 85, 247, 0.1);">
                        <i class="ti ti-file-text fs-4" style="color: #a855f7 !important;"></i>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-lg-3">
            <div class="stat-card">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <p class="text-muted mb-1">Completion Projects</p>
                        <h2 class="fw-bold mb-0">{{cp}}</h2>
                    </div>
                    <div class="stat-icon" style="background-color: rgba(249, 115, 22, 0.1);">
                        <i class="ti ti-check fs-4" style="color: var(--accent-orange);"></i>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-lg-3">
            <div class="stat-card">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <p class="text-muted mb-1">Ongoing Projects</p>
                        <h2 class="fw-bold mb-0">{{op}}</h2>
                    </div>
                    <div class="stat-icon" style="background-color: rgba(249, 115, 22, 0.1);">
                        <i class="ti ti-run fs-4" style="color: var(--accent-orange);"></i>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-lg-3">
            <div class="stat-card">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <p class="text-muted mb-1">Total Enquiries</p>
                        <h2 class="fw-bold mb-0">{{te}}</h2>
                    </div>
                    <div class="stat-icon" style="background-color: rgba(249, 115, 22, 0.1);">
                        <i class="ti ti-message-circle fs-4" style="color: var(--accent-yellow);"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Charts and Recent Activity -->
    <div class="row g-4 mb-4">
        <!-- Project Progress -->
        <div class="col-lg-6">
            <div class="dark-card rounded-3 p-4">
                <h5 class="fw-semibold mb-4">Project Progress</h5>
                <div class="space-y-4">
                    <div class="mb-4">
                        <div class="d-flex justify-content-between mb-2">
                            <span class="small">Downtown Office Complex</span>
                            <span class="small text-primary">75%</span>
                        </div>
                        <div class="progress-custom">
                            <div class="progress-bar-custom bg-primary" style="width: 75%; height: 100%;"></div>
                        </div>
                    </div>
                    <div class="mb-4">
                        <div class="d-flex justify-content-between mb-2">
                            <span class="small">Residential Tower A</span>
                            <span class="small text-success">92%</span>
                        </div>
                        <div class="progress-custom">
                            <div class="progress-bar-custom bg-success" style="width: 92%; height: 100%;"></div>
                        </div>
                    </div>
                    <div class="mb-4">
                        <div class="d-flex justify-content-between mb-2">
                            <span class="small">Shopping Mall Renovation</span>
                            <span class="small" style="color: var(--accent-orange);">45%</span>
                        </div>
                        <div class="progress-custom">
                            <div class="progress-bar-custom"
                                style="width: 45%; height: 100%; background-color: var(--accent-orange);"></div>
                        </div>
                    </div>
                    <div class="mb-4">
                        <div class="d-flex justify-content-between mb-2">
                            <span class="small">Bridge Construction</span>
                            <span class="small text-danger">28%</span>
                        </div>
                        <div class="progress-custom">
                            <div class="progress-bar-custom bg-danger" style="width: 28%; height: 100%;"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Recent Activity -->
        <div class="col-lg-6">
            <div class="dark-card rounded-3 p-4">
                <h5 class="fw-semibold mb-4">Recent Activity</h5>
                <div>
                    <div class="d-flex mb-3">
                        <div class="activity-dot bg-success me-3"></div>
                        <div>
                            <p class="mb-1 small">Foundation work completed for Tower A</p>
                            <p class="text-muted small mb-0">2 hours ago</p>
                        </div>
                    </div>
                    <div class="d-flex mb-3">
                        <div class="activity-dot bg-primary me-3"></div>
                        <div>
                            <p class="mb-1 small">New team member added to Mall project</p>
                            <p class="text-muted small mb-0">4 hours ago</p>
                        </div>
                    </div>
                    <div class="d-flex mb-3">
                        <div class="activity-dot me-3" style="background-color: var(--accent-orange);"></div>
                        <div>
                            <p class="mb-1 small">Budget approved for Bridge project</p>
                            <p class="text-muted small mb-0">1 day ago</p>
                        </div>
                    </div>
                    <div class="d-flex mb-3">
                        <div class="activity-dot me-3" style="background-color: #a855f7;"></div>
                        <div>
                            <p class="mb-1 small">Safety inspection scheduled</p>
                            <p class="text-muted small mb-0">2 days ago</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="dark-card rounded-3 p-4">
        <h5 class="fw-semibold mb-4">Quick Actions</h5>
        <div class="row g-3">
            <div class="col-6 col-md-3">
                <button class="quick-action-btn w-100">
                    <i class="ti ti-plus fs-2 text-primary mb-2"></i>
                    <span class="small">New Project</span>
                </button>
            </div>
            <div class="col-6 col-md-3">
                <button class="quick-action-btn w-100">
                    <i class="ti ti-user-plus fs-2 text-success mb-2"></i>
                    <span class="small">Add Team</span>
                </button>
            </div>
            <div class="col-6 col-md-3">
                <button class="quick-action-btn w-100">
                    <i class="ti ti-file-text fs-2 mb-2" style="color: var(--accent-orange);"></i>
                    <span class="small">Generate Report</span>
                </button>
            </div>
            <div class="col-6 col-md-3">
                <button class="quick-action-btn w-100">
                    <i class="ti ti-settings fs-2 mb-2" style="color: #a855f7;"></i>
                    <span class="small">Settings</span>
                </button>
            </div>
        </div>
    </div>
</main>


<!-- SweetAlert for messages -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
{% if messages %}
{% for message in messages %}
<script>
    const Toast = Swal.mixin({
        toast: true,
        position: 'top-end',
        showConfirmButton: false,
        timer: 3000,
        timerProgressBar: true
    });
    Toast.fire({
        icon: '{{ message.tags }}',
        title: '{{ message|escapejs }}'
    });
</script>
{% endfor %}
{% endif %}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Quick action buttons
        const quickActionBtns = document.querySelectorAll('.quick-action-btn');
        quickActionBtns.forEach(btn => {
            btn.addEventListener('click', function () {
                const action = this.querySelector('span').textContent;
                alert(`${action} feature would open here in a real application!`);
            });
        });

        // Animate progress bars on load
        const progressBars = document.querySelectorAll('.progress-bar-custom');
        progressBars.forEach(bar => {
            const width = bar.style.width;
            bar.style.width = '0%';
            setTimeout(() => {
                bar.style.width = width;
            }, 500);
        });

        // Add hover effects to stat cards
        const statCards = document.querySelectorAll('.stat-card');
        statCards.forEach(card => {
            card.addEventListener('mouseenter', function () {
                this.style.transform = 'translateY(-5px)';
            });
            card.addEventListener('mouseleave', function () {
                this.style.transform = 'translateY(0)';
            });
        });
    });
</script>
{% endblock %}